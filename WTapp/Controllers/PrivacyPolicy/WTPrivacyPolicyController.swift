//
//  WTPrivacyPolicyController.swift
//  WTapp
//
//  Created by RSL on 17/03/22.
//

import UIKit

class WTPrivacyPolicyController: UIViewController {

    @IBOutlet weak var privacyPolicy: UITextView!
    @IBOutlet weak var backButton: UIButton!
    
    override var preferredStatusBarStyle: UIStatusBarStyle {
        return .lightContent
    }
    
    override func viewDidLoad() {
        super.viewDidLoad()
        
        setNeedsStatusBarAppearanceUpdate()
        let imageName: String = "Logo_WT"
        let imageFileExtension: String = "png"
        let imagePath: String = Bundle.main.path(forResource: imageName, ofType: imageFileExtension) ?? "Logo_WT.png"
        
        let imageHtmlTag = NSString.init(format: "<img src=\"file://%@\" %@ />", imagePath,"style='text-align:center;padding-bottom:15px;width: 200px; display: block;margin-bottom:15px; margin-left: auto;margin-right: auto;'")
        
        let privacyPloicy = "<!DOCTYPE html> <html> <head><style type=\"text/css\"> body{font-family: '-apple-system','HelveticaNeue'; font-size:22;margin-top:15px;} </style> <title>Page Title</title></head><body>\(imageHtmlTag)<p><b><br></br>1)</b> General Information </p><p><b>a)</b> This policy (“Privacy Policy”) explains what information <b>WinningTicket LLC</b>. and its subsidiaries (“WinningTicket.com”) or our service providers collect from or about users of the WinningTicket.com websites, including any content WinningTicket.com may provide through the websites (collectively, the “WinningTicket.com Websites”), the WinningTicket.com services, including but not limited to WinningTicket.com Affiliate Network, , the WinningTicket.com Partner Portal, WinningTicket.com Web Services, or any other services that WinningTicket.com may provide through the WinningTicket.com Websites (collectively, the “Service Offerings”), our mobile applications, and other interactions (e.g., customer service inquiries, user conferences, etc.), and states our practices regarding such information. If you are outside the European Economic Area (EEA), by accessing files, browsing, or otherwise using the WinningTicket.com Websites, you have agreed to the use of your data as described in this Privacy Policy. If you are in the EEA, by accessing the WinningTicket.com Websites, you have agreed to the use of my data as described in this Privacy Policy. It also describes the choices regarding use, access and collection of personal information as well as your rights to your personal data that we process. If you do not agree with the terms, please do not access or use the WinningTicket.com Websites, Service Offerings, mobile applications, or any other aspect of WinningTicket.com’s business. </p><p><b>2)</b>Scope </p><p><b>a)</b> This Privacy Policy applies to personal information and other information WinningTicket.com or its service providers collect from or about the users of the WinningTicket.com Websites, Service Offerings, our mobile applications and other interactions (e.g., customer service inquiries, user conferences, etc.). Unless otherwise specified below, this Privacy Policy does not apply to any other products or services or to information collected in any other way (whether online or offline) or for any other purpose. </p><p><b>3)</b> Personal Information of our Customers’ Clients and Employees </p><p><b>a)</b> WinningTicket.com collects information under the direction of our customers, and has no direct relationship with the individuals whose personal data it processes on behalf of such customers. When we provide services to our customers, in some instances we process personal information about their clients or employees (“Client Information”) on their behalf. In these situations, it is our customers rather than we who decide the reasons for which the Client Information will be processed. </p><p><b>b)</b>If you are a client or employee of one of our customers and would no longer like to be contacted by one of our customers that use our service or for details of how the Client Information will be used and protected, and details of how to access or correct the information, please refer to the privacy statement of the WinningTicket.com customer to which you submitted your personal information. We may transfer personal information to companies that help us provide our service. Transfers to subsequent third parties are covered by the service agreements with our customers. </p><p><b>c)</b> WinningTicket.com acknowledges that you have the right to access your personal information. An individual who seeks access, or who seeks to correct, amend, or delete data should directly query WinningTicket.com’s customer. If requested to remove data, we will respond within the applicable legal timeframe. </p><p><b>d)</b> We will retain personal data we process on behalf of our customers for as long as needed to provide services to our customers at their instruction. WinningTicket.com may also retain this personal information as necessary to comply with our legal obligations, resolve disputes, and enforce our agreements. </p><p><b>4)</b> Personal Information </p><p><b>a)</b> For purposes of this Privacy Policy, “personal information” means information that can be used to personally identify you, such as your name, address, telephone number, e-mail address, user IDs and passwords, online identifiers, device information, billing and transaction information, credit card or other financial information, contact preferences, and similar information. </p><p><b>5)</b>Personal Information We Collect </p><p><b>a)</b>WinningTicket.com or our service providers may collect, store, and process personal information and other information from or about you when you: i) use WinningTicket.com Websites or Service Offerings to order products or services; ii) register products; iii) request information; iv) subscribe to marketing or support materials; v) download proprietary WinningTicket.com software, third party software, or open source software (“Software”) from WinningTicket.com Websites; vi) enter a contest; vii) respond to promotional campaigns; and viii) register to a secure extranet site to obtain access to Software or Service Offering and any associated information, support, and training. </p><p><b>b)</b>We also may collect additional information that is related to you such as your computer’s operating system, browser, and your use of and activities on our websites. </p><p><b>6)</b>How We Use the Information We Collect </p><p><b>a)</b> WinningTicket.com or our service providers may use the personal information and other information we collect from you in various ways including in connection with: providing service and support to you; billing you for Service Offerings; verifying your identity; carrying out our obligations and enforcing our rights arising from any contracts entered into between you and WinningTicket.com; communicating information about WinningTicket.com Websites, Service Offerings and our mobile applications, and other interactions (e.g., customer service inquiries, user conferences, etc.); improving our WinningTicket.com Websites, Services Offerings and our mobile applications, and other interactions (e.g., customer service inquiries, user conferences, etc.); contacting you to complete surveys that we use for marketing or quality assurance purposes; sending you promotional information; complying with Service Offering obligations as well as in any other way we describe when you provide information; combating fraud, crime and as otherwise required or permitted by law; and for any other purpose with your consent. </p><p><b>b)</b>To assist us with the uses described in this Privacy Policy, information we or our service providers have collected from or about you through WinningTicket.com Websites, WinningTicket.com Service Offerings and our mobile applications, and other interactions (e.g., customer service inquiries, user conferences, etc.), including about your use thereof, may be combined with or enhanced by other information from or about you that we have obtained from other online or offline sources, including from our service providers or business partners. </p><p><b>c)</b>We may send you push notifications from time-to-time in order to update you about any events or promotions that we may be running. If you no longer wish to receive these types of communications, you may turn them off at the device level by opting out. To ensure you receive proper notifications, we will need to collect certain information about your device such as operating system and user identification information. </p><p><b>7)</b>Collection of Information Using Cookies and Other Tools </p><p><b>a)</b>WinningTicket.com may collect and/or log your Internet Protocol address, Internet domain name, the web browser and operating system used to access WinningTicket.com Websites, Service Offerings, our mobile applications or other interactions (e.g., customer service inquiries, user conferences, etc.), the files visited, the time spent in each file, and the time and date of each visit or clickstream data. WinningTicket.com may collect this information automatically as you browse via the use of log files and web beacons to analyze trends in the aggregate and administer the WinningTicket.com Websites and Service Offerings. WinningTicket.com and its partners use cookies or similar technologies to analyze trends, administer the website, track users’ movements around the website, and to gather demographic information about our user base as a whole. You can control the use of cookies at the individual browser level, but if you choose to disable cookies, it may limit your use of certain features or functions on our website or service. </p><p><b>b)</b>We may also use cookies and other electronic tools placed by a third-party service provider to measure the effectiveness of our advertising and other information and help us understand what product information is of most interest to our customers and what kinds of advertising offers our customers like to see. Although the service provider logs the information coming from WinningTicket.com Websites or Service Offerings on our behalf, WinningTicket.com controls how that data may and may not be used. You can control the use of cookies at the individual browser level, but if you choose to disable cookies, it may limit your use of certain features or functions on our website or service. </p><p><b>c)</b>If you wish to opt out of interest-based advertising, please contact us at privacy@WinningTicket.com.io or follow the opt-out instructions in the email. </p><p><b>d)</b>We use mobile analytics software to allow us to better understand the functionality of our mobile applications on your phone. This software may record information such as how often you use the application, the events that occur within the application, aggregated usage, performance data, and where the application was downloaded from. We do not link the information we store within the analytics software to any personal information you submit within the mobile application.</p><p><b>8)</b> Sharing Your Information </p><p><b>a)</b> WinningTicket.com may share non-personal information (e.g., anonymous, aggregated data) without restriction. WinningTicket.com may share your personal information as described in this Privacy Policy and with its service providers and suppliers to the extent necessary to deliver the WinningTicket.com Websites or Service Offerings you requested, respond to your requests for information on Software or Service Offerings, or otherwise support your business needs. If you opt out of sharing your information with these third-party service providers for these purposes, we may be unable to provide the WinningTicket.com Websites, Service Offerings, mobile applications, information or support you requested. </p><p><b>b)</b>Third-party service providers and suppliers receiving personal information are authorized to use your personal information only for the purpose it was originally intended or as required or permitted by law. However, unless otherwise dictated by law or agreement, WinningTicket.com is not responsible for any improper use by such parties. </p><p><b>9)</b>Sharing Personal information Across Country Borders </p><p><b>a)</b>We may also disclose your personal information and other information, including across country borders: i) to our subsidiaries, affiliates, and worldwide offices; ii) to comply with the law or in response to a subpoena, court order, law enforcement or government request, or other legal process; iii) to produce relevant documents or information in connection with litigation, arbitration, mediation, adjudication, government or internal investigations, or other legal or administrative proceedings; iv) if WinningTicket.com determines in its good faith judgment that such disclosure is necessary to provide its services or to protect the rights, interests, safety, or property of its business, employees, suppliers, customers, or others; v) in connection with any proposed or actual sale or other transfer of some or all assets of WinningTicket.com, and/or any proposed or actual sale or merger of WinningTicket.com or any division of WinningTicket.com; vi) to enforce the terms of any agreement with WinningTicket.com; vii) to combat fraud or other criminal activity; viii) for any other purpose disclosed by us when you provide the information; ix) as otherwise required or permitted by law; and/or with your consent. </p><p><b>b)</b> Unless permitted by relevant laws, WinningTicket.com will not share, sell, trade, or lease your personal information to or with others except as provided for in this Privacy Policy. </p><p><b>10)</b>Marketing Choices, Right to Access Your Personal Information, and Our Retention </p><p><b>a)</b>Your Marketing Choices. Your decision to provide the personal information that we may request from time to time is voluntary. However, if you do not provide the personal information requested, you may not be able to proceed with the activity or receive the benefit for which the personal information is being requested. You can always unsubscribe or choose not to receive promotional materials from WinningTicket.com by following the specific instructions in the email or other communication you receive or by notifying us via the appropriate method(s) described below. It may take a reasonable period of time to process your request, but no longer than 10 business days for email promotions. In countries where WinningTicket.com is required to do so by law, WinningTicket.com will offer you the opportunity to provide opt-in consent before promotional materials are sent, or promotional calls are made, to you. This will not apply to service communications that are considered part of certain Service Offerings, which you may receive periodically unless you cancel the applicable Service Offerings. </p><p><b>b)</b>Your Access to Your Personal Information. WinningTicket.com strives to keep your personal information accurate. We have implemented technology, management processes, and policies designed to maintain data integrity. We will provide you with reasonable access to your personal information in accordance with relevant laws, including by making reasonable efforts to provide you with online access and the opportunity to update your information. To protect your privacy and security, we will take steps to verify your identity before granting access or making changes to your personal information. Upon request, WinningTicket.com will provide you with information about whether we hold any of your personal information. To request access, correction, or deletion or transfer of your personal information, follow the applicable instructions below. While we will make reasonable efforts to accommodate your request, we also reserve the right to reject such requests or to impose certain restrictions and requirements on such requests, if required or permitted by applicable law. We will respond to your request within a reasonable time frame. </p><p><b>c)</b>Our Retention of Your Information. We will retain your personal information for as long as your account is active or as needed to provide you WinningTicket.com Website, Service Offerings and mobile applications. If you wish to cancel your account, or request that we no longer use your personal information to provide you Software or Services, contact us via the applicable methods provided below. Even after we cancel your account or cease using your personal information to provide you Software or Services, we may still retain, use, and disclose your information as necessary to comply with our legal, regulatory, ethical, or document retention obligations, and any request to delete your personal information is subject to these obligations and restrictions. </p><p><b>11)</b>Security of Your Personal Information </p><p><b>a)</b>WinningTicket.com has implemented administrative, technical, and physical measures designed to protect your personal information from accidental loss and from unauthorized access, disclosure, use, alteration, or destruction. These measures include computer safeguards and secured files and buildings, Internet firewalls, intrusion detection, anti-virus protection, network monitoring, and, where appropriate and required by applicable law, Transport Layer Security (“TLS”) or similarly encrypted browsers. However, no electronic data transmission or storage of information can be guaranteed to be 100% private and secure, and you understand that WinningTicket.com does not ensure or warrant the privacy or security of any information we collect from or about you, and that you use the WinningTicket.com Websites and provide us with information at your own risk. If a password is used to help protect your accounts and personal information, it is your responsibility to keep your password confidential. Please also be careful to avoid “phishing” scams, where someone may send you an email that looks like it is from WinningTicket.com asking for your personal information. WinningTicket.com will never request your personal information through e-mail. If you have any questions about the security of your personal information, you can contact us at set forth below. </p><p><b>12)</b>Your California Privacy Rights </p><p><b>a)</b> If you are a California resident, California Civil Code §1798.83 permits you to request information regarding the disclosure of your personal information by WinningTicket.com to its affiliates and/or third parties for their direct marketing purposes, within the past year. To make such a request, contact us as set forth below. </p><p><b>13)</b>WinningTicket.com Contact Information for Marketing Choices, Requests for Access, Correction Deletion or Transfer, and Questions About and Enforcement of This Privacy Policy </p><p><b>a)</b>Unsubscribe from WinningTicket.com emails at our unsubscribe page here. </p><p><b>b)</b>To request access, correction, deletion or transfer of your personal information or withdrawal of consent to the processing described in this Privacy Policy, please email us at privacy@winningticket.com. </p><p><b>c)</b>If you have questions regarding our compliance with this Privacy Policy, please contact us by mail at <b>WinningTicket LLC</b>., 1194 Pine Valley Drive Wellington, FL 33414 Attn: Legal; or emailing us at privacy@winningticket.com. </p><p><b>d)</b> If you are a resident of the EEA and have an unresolved privacy or personal information collection, use, or disclosure concern that we have not addressed satisfactorily, please contact the EU Data Protection Authorities. If you are a resident of Switzerland and have this concern, please contact the Swiss Federal Data Protection and Information Commissioner. </p><p><b>i)</b>For more information on how to contact the EU Data Protection Authorities, click here. ii) For more information on how to contact the Swiss Federal Data Protection and Information Commissioner, click here. </p><p><b>14)</b> Changes to this Privacy Policy a) WinningTicket.com may update this Privacy Policy periodically, and will note the date of its most recent revision above. If we make material changes to this Privacy Policy, we will notify you either by prominently posting a notice of such changes prior to implementing the changes or by directly sending you a notification. We encourage you to review this Privacy Policy frequently to be informed of how WinningTicket.com is collecting, using, retaining, protecting, disclosing, and transferring your information.</p></body></html>"
        
        let htmlData = NSString(string: privacyPloicy).data(using: String.Encoding.unicode.rawValue)
        let options = [NSAttributedString.DocumentReadingOptionKey.documentType:
                NSAttributedString.DocumentType.html]
        guard let attributedString = try? NSMutableAttributedString(data: htmlData ?? Data(), options: options, documentAttributes: nil) else { return }
        let convertedFont = newAttrSize(blockQuote: attributedString)
        privacyPolicy.attributedText = convertedFont
        
        backButton.addTarget(self, action: #selector(backTapped), for: .touchUpInside)
    }
    
    func newAttrSize(blockQuote: NSAttributedString) -> NSAttributedString
    {
        let yourAttrStr = NSMutableAttributedString(attributedString: blockQuote)
        yourAttrStr.enumerateAttribute(.font, in: NSMakeRange(0, yourAttrStr.length), options: .init(rawValue: 0)) {
            (value, range, stop) in
            if let font = value as? UIFont {
                let resizedFont = font.withSize(font.pointSize + 9)
                yourAttrStr.addAttribute(.font, value: resizedFont, range: range)
            }
        }
        return yourAttrStr
    }
    
    @objc func backTapped() {
        self.dismiss(animated: true, completion: nil)
    }
}
